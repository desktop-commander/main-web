import{j as e}from"./jsx-runtime.D3GSbgeI.js";import{r as n}from"./index.BaMLtrTp.js";import{E as Le,V as Wt,d as Kt,r as $t,e as zt,u as Gt,T as Be,s as Jt,a as Yt,b as Zt,c as qt,g as Ve,f as Ee}from"./EngagementMeter.B4KrqRE5.js";import{C as Xt,a as Qt,b as eo,c as to,d as oo}from"./card.DxEMxjMY.js";import{B as Q,c as Fe,A as so,C as no,R as ro,a as ao}from"./index.Bde2k5C-.js";import{S as Ie,D as Ue,C as He,F as We}from"./search.CvYIc8FW.js";import{A as Ke,a as $e,R as ze,C as Ge,T as Je,b as Ye,S as Ze,c as he,F as qe,j as io,u as lo,B as co,I as De,U as po,P as mo,d as uo,e as fo,f as ho,g as xo,h as go,i as Me}from"./UsePromptWizard.BcnlqAN7.js";import{S as Xe}from"./shield.Dnfnq1p4.js";import{F as Qe}from"./file-text.DlCSEU1L.js";import{S as et}from"./sparkles.sp_Qnyce.js";import{Z as vo}from"./zap.D6vbqF2e.js";import{r as tt}from"./index.mQPD96qW.js";import{c as wo,b as W,a as A,f as te,e as Pe,u as Oe}from"./index.MiiqikCt.js";import{c as yo,u as _o}from"./index.a_BCYi5k.js";import{c as So,u as q,a as H}from"./utils.Bz4oZCjs.js";import{D as bo}from"./index.BJ8PF5X-.js";import{P as No,h as jo,u as To,R as Co,F as Io,C as Po}from"./index.CM47RZTK.js";import{u as Ro}from"./index.CyN3cLSG.js";import{C as Re}from"./chevron-down.B6Si1q7U.js";import{c as ko}from"./createLucideIcon.CJ67VFfW.js";import{B as ae}from"./button.DLufLqry.js";import{X as ot}from"./x.B1hOxjOp.js";import{S as Eo}from"./SubmitPromptButton.HgRA3B5l.js";import{D as Do,a as Mo,b as Oo,c as Ao,d as Lo}from"./dialog.qbgWPnsu.js";import{R as Bo}from"./rocket.DJM_PiJ5.js";import{E as Vo}from"./external-link.BigcEWhC.js";import"./index.yBjzXJbu.js";import"./module.B8dAKoFc.js";import"./index.TRqrCOU-.js";import"./circle.D5islIf4.js";import"./terminal.CvJQ-WtW.js";import"./index.sGmLo0nR.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=ko("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Uo={FolderSearch:qe,FolderOrganize:We,Code:he,BarChart3:He,Settings:Ze,FileText:Qe,Archive:Ye,Shield:Xe,Database:Ue,TestTube:Je,Clock:Ge,RefreshCw:ze,ArrowRightLeft:$e,Activity:Ke,Search:Ie},Ho=t=>{if(!t)return!1;const s=new Date(t),a=Math.abs(new Date().getTime()-s.getTime());return Math.ceil(a/(1e3*60*60*24))<=14};function Wo({useCase:t,onVote:s,onOpen:o}){const a=Uo[t.icon]||he,r=Ho(t.dateAdded),d=p=>{switch(p){case"Instant output":return"session-instant-output";case"Step-by-step flow":return"session-step-by-step-flow";default:return"session-instant-output"}},i=p=>{switch(p){case"Instant output":return{text:"Instant",icon:vo};case"Step-by-step flow":return{text:"Step-by-Step",icon:null};default:return{text:p,icon:null}}},l=`/library/prompts/${t.slug}/`,c=p=>{o&&o(t)};return e.jsx("a",{href:l,className:"block h-full no-underline",onClick:c,children:e.jsxs(Xt,{className:"dc-card h-full flex flex-col cursor-pointer focus:outline-none focus:ring-2 focus:ring-primary/50 relative group after:content-['↗'] after:absolute after:bottom-3 after:right-3 after:text-xs after:text-muted-foreground/70 after:pointer-events-none after:transition-transform after:transition-colors after:duration-200 hover:after:text-primary hover:after:translate-x-0.5 hover:after:-translate-y-0.5",role:"button",tabIndex:-1,children:[e.jsx(Qt,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"p-2 bg-dc-surface-elevated rounded-lg",children:e.jsx(a,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs(eo,{className:"text-lg leading-snug mb-2 min-h-[3rem] flex items-start",children:[t.title,r&&e.jsxs(Q,{variant:"outline",className:"ml-2 text-xs bg-primary/10 text-primary border-primary/20",children:[e.jsx(et,{className:"h-3 w-3 mr-1"}),"New"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Q,{variant:"outline",className:`text-foreground/70 border-foreground/20 bg-transparent font-normal ${d(t.sessionType)} whitespace-nowrap`,children:e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const p=i(t.sessionType);return e.jsxs(e.Fragment,{children:[p.icon&&e.jsx(p.icon,{className:"h-3 w-3"}),e.jsx("span",{children:p.text})]})})()})})})]})]}),e.jsx("div",{className:"flex items-center shrink-0 min-w-[90px] whitespace-nowrap","aria-label":"All-time engagement",children:e.jsx(Le,{count:t.votes,size:"sm"})})]})}),e.jsx(to,{className:"flex-1 flex flex-col",children:e.jsx(oo,{className:"text-sm leading-relaxed mb-4",children:t.description})})]})})}function Ae(t,[s,o]){return Math.min(o,Math.max(s,t))}function Ko(t){const s=$o(t),o=n.forwardRef((a,r)=>{const{children:d,...i}=a,l=n.Children.toArray(d),c=l.find(Go);if(c){const p=c.props.children,_=l.map(N=>N===c?n.Children.count(p)>1?n.Children.only(null):n.isValidElement(p)?p.props.children:null:N);return e.jsx(s,{...i,ref:r,children:n.isValidElement(p)?n.cloneElement(p,void 0,_):null})}return e.jsx(s,{...i,ref:r,children:d})});return o.displayName=`${t}.Slot`,o}function $o(t){const s=n.forwardRef((o,a)=>{const{children:r,...d}=o;if(n.isValidElement(r)){const i=Yo(r),l=Jo(d,r.props);return r.type!==n.Fragment&&(l.ref=a?So(a,i):i),n.cloneElement(r,l)}return n.Children.count(r)>1?n.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var zo=Symbol("radix.slottable");function Go(t){return n.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===zo}function Jo(t,s){const o={...s};for(const a in s){const r=t[a],d=s[a];/^on[A-Z]/.test(a)?r&&d?o[a]=(...l)=>{const c=d(...l);return r(...l),c}:r&&(o[a]=r):a==="style"?o[a]={...r,...d}:a==="className"&&(o[a]=[r,d].filter(Boolean).join(" "))}return{...t,...o}}function Yo(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,o=s&&"isReactWarning"in s&&s.isReactWarning;return o?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,o=s&&"isReactWarning"in s&&s.isReactWarning,o?t.props.ref:t.props.ref||t.ref)}var Zo=[" ","Enter","ArrowUp","ArrowDown"],qo=[" ","Enter"],ie="Select",[xe,ge,Xo]=yo(ie),[de]=wo(ie,[Xo,Fe]),ve=Fe(),[Qo,oe]=de(ie),[es,ts]=de(ie),st=t=>{const{__scopeSelect:s,children:o,open:a,defaultOpen:r,onOpenChange:d,value:i,defaultValue:l,onValueChange:c,dir:p,name:_,autoComplete:N,disabled:f,required:v,form:T}=t,m=ve(s),[h,j]=n.useState(null),[x,y]=n.useState(null),[F,L]=n.useState(!1),$=_o(p),[b,P]=Oe({prop:a,defaultProp:r??!1,onChange:d,caller:ie}),[C,I]=Oe({prop:i,defaultProp:l,onChange:c,caller:ie}),D=n.useRef(null),K=h?T||!!h.closest("form"):!0,[Y,z]=n.useState(new Set),G=Array.from(Y).map(B=>B.props.value).join(";");return e.jsx(ro,{...m,children:e.jsxs(Qo,{required:v,scope:s,trigger:h,onTriggerChange:j,valueNode:x,onValueNodeChange:y,valueNodeHasChildren:F,onValueNodeHasChildrenChange:L,contentId:Pe(),value:C,onValueChange:I,open:b,onOpenChange:P,dir:$,triggerPointerDownPosRef:D,disabled:f,children:[e.jsx(xe.Provider,{scope:s,children:e.jsx(es,{scope:t.__scopeSelect,onNativeOptionAdd:n.useCallback(B=>{z(u=>new Set(u).add(B))},[]),onNativeOptionRemove:n.useCallback(B=>{z(u=>{const g=new Set(u);return g.delete(B),g})},[]),children:o})}),K?e.jsxs(Ct,{"aria-hidden":!0,required:v,tabIndex:-1,name:_,autoComplete:N,value:C,onChange:B=>I(B.target.value),disabled:f,form:T,children:[C===void 0?e.jsx("option",{value:""}):null,Array.from(Y)]},G):null]})})};st.displayName=ie;var nt="SelectTrigger",rt=n.forwardRef((t,s)=>{const{__scopeSelect:o,disabled:a=!1,...r}=t,d=ve(o),i=oe(nt,o),l=i.disabled||a,c=q(s,i.onTriggerChange),p=ge(o),_=n.useRef("touch"),[N,f,v]=Pt(m=>{const h=p().filter(y=>!y.disabled),j=h.find(y=>y.value===i.value),x=Rt(h,m,j);x!==void 0&&i.onValueChange(x.value)}),T=m=>{l||(i.onOpenChange(!0),v()),m&&(i.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return e.jsx(so,{asChild:!0,...d,children:e.jsx(W.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":It(i.value)?"":void 0,...r,ref:c,onClick:A(r.onClick,m=>{m.currentTarget.focus(),_.current!=="mouse"&&T(m)}),onPointerDown:A(r.onPointerDown,m=>{_.current=m.pointerType;const h=m.target;h.hasPointerCapture(m.pointerId)&&h.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(T(m),m.preventDefault())}),onKeyDown:A(r.onKeyDown,m=>{const h=N.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&f(m.key),!(h&&m.key===" ")&&Zo.includes(m.key)&&(T(),m.preventDefault())})})})});rt.displayName=nt;var at="SelectValue",it=n.forwardRef((t,s)=>{const{__scopeSelect:o,className:a,style:r,children:d,placeholder:i="",...l}=t,c=oe(at,o),{onValueNodeHasChildrenChange:p}=c,_=d!==void 0,N=q(s,c.onValueNodeChange);return te(()=>{p(_)},[p,_]),e.jsx(W.span,{...l,ref:N,style:{pointerEvents:"none"},children:It(c.value)?e.jsx(e.Fragment,{children:i}):d})});it.displayName=at;var os="SelectIcon",lt=n.forwardRef((t,s)=>{const{__scopeSelect:o,children:a,...r}=t;return e.jsx(W.span,{"aria-hidden":!0,...r,ref:s,children:a||"▼"})});lt.displayName=os;var ss="SelectPortal",ct=t=>e.jsx(No,{asChild:!0,...t});ct.displayName=ss;var le="SelectContent",dt=n.forwardRef((t,s)=>{const o=oe(le,t.__scopeSelect),[a,r]=n.useState();if(te(()=>{r(new DocumentFragment)},[]),!o.open){const d=a;return d?tt.createPortal(e.jsx(pt,{scope:t.__scopeSelect,children:e.jsx(xe.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),d):null}return e.jsx(mt,{...t,ref:s})});dt.displayName=le;var J=10,[pt,se]=de(le),ns="SelectContentImpl",rs=Ko("SelectContent.RemoveScroll"),mt=n.forwardRef((t,s)=>{const{__scopeSelect:o,position:a="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:d,onPointerDownOutside:i,side:l,sideOffset:c,align:p,alignOffset:_,arrowPadding:N,collisionBoundary:f,collisionPadding:v,sticky:T,hideWhenDetached:m,avoidCollisions:h,...j}=t,x=oe(le,o),[y,F]=n.useState(null),[L,$]=n.useState(null),b=q(s,S=>F(S)),[P,C]=n.useState(null),[I,D]=n.useState(null),K=ge(o),[Y,z]=n.useState(!1),G=n.useRef(!1);n.useEffect(()=>{if(y)return jo(y)},[y]),To();const B=n.useCallback(S=>{const[M,...U]=K().map(O=>O.ref.current),[k]=U.slice(-1),E=document.activeElement;for(const O of S)if(O===E||(O?.scrollIntoView({block:"nearest"}),O===M&&L&&(L.scrollTop=0),O===k&&L&&(L.scrollTop=L.scrollHeight),O?.focus(),document.activeElement!==E))return},[K,L]),u=n.useCallback(()=>B([P,y]),[B,P,y]);n.useEffect(()=>{Y&&u()},[Y,u]);const{onOpenChange:g,triggerPointerDownPosRef:w}=x;n.useEffect(()=>{if(y){let S={x:0,y:0};const M=k=>{S={x:Math.abs(Math.round(k.pageX)-(w.current?.x??0)),y:Math.abs(Math.round(k.pageY)-(w.current?.y??0))}},U=k=>{S.x<=10&&S.y<=10?k.preventDefault():y.contains(k.target)||g(!1),document.removeEventListener("pointermove",M),w.current=null};return w.current!==null&&(document.addEventListener("pointermove",M),document.addEventListener("pointerup",U,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",M),document.removeEventListener("pointerup",U,{capture:!0})}}},[y,g,w]),n.useEffect(()=>{const S=()=>g(!1);return window.addEventListener("blur",S),window.addEventListener("resize",S),()=>{window.removeEventListener("blur",S),window.removeEventListener("resize",S)}},[g]);const[R,V]=Pt(S=>{const M=K().filter(E=>!E.disabled),U=M.find(E=>E.ref.current===document.activeElement),k=Rt(M,S,U);k&&setTimeout(()=>k.ref.current.focus())}),ee=n.useCallback((S,M,U)=>{const k=!G.current&&!U;(x.value!==void 0&&x.value===M||k)&&(C(S),k&&(G.current=!0))},[x.value]),Z=n.useCallback(()=>y?.focus(),[y]),X=n.useCallback((S,M,U)=>{const k=!G.current&&!U;(x.value!==void 0&&x.value===M||k)&&D(S)},[x.value]),ce=a==="popper"?be:ut,pe=ce===be?{side:l,sideOffset:c,align:p,alignOffset:_,arrowPadding:N,collisionBoundary:f,collisionPadding:v,sticky:T,hideWhenDetached:m,avoidCollisions:h}:{};return e.jsx(pt,{scope:o,content:y,viewport:L,onViewportChange:$,itemRefCallback:ee,selectedItem:P,onItemLeave:Z,itemTextRefCallback:X,focusSelectedItem:u,selectedItemText:I,position:a,isPositioned:Y,searchRef:R,children:e.jsx(Co,{as:rs,allowPinchZoom:!0,children:e.jsx(Io,{asChild:!0,trapped:x.open,onMountAutoFocus:S=>{S.preventDefault()},onUnmountAutoFocus:A(r,S=>{x.trigger?.focus({preventScroll:!0}),S.preventDefault()}),children:e.jsx(bo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:i,onFocusOutside:S=>S.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:e.jsx(ce,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:S=>S.preventDefault(),...j,...pe,onPlaced:()=>z(!0),ref:b,style:{display:"flex",flexDirection:"column",outline:"none",...j.style},onKeyDown:A(j.onKeyDown,S=>{const M=S.ctrlKey||S.altKey||S.metaKey;if(S.key==="Tab"&&S.preventDefault(),!M&&S.key.length===1&&V(S.key),["ArrowUp","ArrowDown","Home","End"].includes(S.key)){let k=K().filter(E=>!E.disabled).map(E=>E.ref.current);if(["ArrowUp","End"].includes(S.key)&&(k=k.slice().reverse()),["ArrowUp","ArrowDown"].includes(S.key)){const E=S.target,O=k.indexOf(E);k=k.slice(O+1)}setTimeout(()=>B(k)),S.preventDefault()}})})})})})})});mt.displayName=ns;var as="SelectItemAlignedPosition",ut=n.forwardRef((t,s)=>{const{__scopeSelect:o,onPlaced:a,...r}=t,d=oe(le,o),i=se(le,o),[l,c]=n.useState(null),[p,_]=n.useState(null),N=q(s,b=>_(b)),f=ge(o),v=n.useRef(!1),T=n.useRef(!0),{viewport:m,selectedItem:h,selectedItemText:j,focusSelectedItem:x}=i,y=n.useCallback(()=>{if(d.trigger&&d.valueNode&&l&&p&&m&&h&&j){const b=d.trigger.getBoundingClientRect(),P=p.getBoundingClientRect(),C=d.valueNode.getBoundingClientRect(),I=j.getBoundingClientRect();if(d.dir!=="rtl"){const E=I.left-P.left,O=C.left-E,ne=b.left-O,re=b.width+ne,we=Math.max(re,P.width),ye=window.innerWidth-J,_e=Ae(O,[J,Math.max(J,ye-we)]);l.style.minWidth=re+"px",l.style.left=_e+"px"}else{const E=P.right-I.right,O=window.innerWidth-C.right-E,ne=window.innerWidth-b.right-O,re=b.width+ne,we=Math.max(re,P.width),ye=window.innerWidth-J,_e=Ae(O,[J,Math.max(J,ye-we)]);l.style.minWidth=re+"px",l.style.right=_e+"px"}const D=f(),K=window.innerHeight-J*2,Y=m.scrollHeight,z=window.getComputedStyle(p),G=parseInt(z.borderTopWidth,10),B=parseInt(z.paddingTop,10),u=parseInt(z.borderBottomWidth,10),g=parseInt(z.paddingBottom,10),w=G+B+Y+g+u,R=Math.min(h.offsetHeight*5,w),V=window.getComputedStyle(m),ee=parseInt(V.paddingTop,10),Z=parseInt(V.paddingBottom,10),X=b.top+b.height/2-J,ce=K-X,pe=h.offsetHeight/2,S=h.offsetTop+pe,M=G+B+S,U=w-M;if(M<=X){const E=D.length>0&&h===D[D.length-1].ref.current;l.style.bottom="0px";const O=p.clientHeight-m.offsetTop-m.offsetHeight,ne=Math.max(ce,pe+(E?Z:0)+O+u),re=M+ne;l.style.height=re+"px"}else{const E=D.length>0&&h===D[0].ref.current;l.style.top="0px";const ne=Math.max(X,G+m.offsetTop+(E?ee:0)+pe)+U;l.style.height=ne+"px",m.scrollTop=M-X+m.offsetTop}l.style.margin=`${J}px 0`,l.style.minHeight=R+"px",l.style.maxHeight=K+"px",a?.(),requestAnimationFrame(()=>v.current=!0)}},[f,d.trigger,d.valueNode,l,p,m,h,j,d.dir,a]);te(()=>y(),[y]);const[F,L]=n.useState();te(()=>{p&&L(window.getComputedStyle(p).zIndex)},[p]);const $=n.useCallback(b=>{b&&T.current===!0&&(y(),x?.(),T.current=!1)},[y,x]);return e.jsx(ls,{scope:o,contentWrapper:l,shouldExpandOnScrollRef:v,onScrollButtonChange:$,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:F},children:e.jsx(W.div,{...r,ref:N,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});ut.displayName=as;var is="SelectPopperPosition",be=n.forwardRef((t,s)=>{const{__scopeSelect:o,align:a="start",collisionPadding:r=J,...d}=t,i=ve(o);return e.jsx(no,{...i,...d,ref:s,align:a,collisionPadding:r,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});be.displayName=is;var[ls,ke]=de(le,{}),Ne="SelectViewport",ft=n.forwardRef((t,s)=>{const{__scopeSelect:o,nonce:a,...r}=t,d=se(Ne,o),i=ke(Ne,o),l=q(s,d.onViewportChange),c=n.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(xe.Slot,{scope:o,children:e.jsx(W.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:A(r.onScroll,p=>{const _=p.currentTarget,{contentWrapper:N,shouldExpandOnScrollRef:f}=i;if(f?.current&&N){const v=Math.abs(c.current-_.scrollTop);if(v>0){const T=window.innerHeight-J*2,m=parseFloat(N.style.minHeight),h=parseFloat(N.style.height),j=Math.max(m,h);if(j<T){const x=j+v,y=Math.min(T,x),F=x-y;N.style.height=y+"px",N.style.bottom==="0px"&&(_.scrollTop=F>0?F:0,N.style.justifyContent="flex-end")}}}c.current=_.scrollTop})})})]})});ft.displayName=Ne;var ht="SelectGroup",[cs,ds]=de(ht),ps=n.forwardRef((t,s)=>{const{__scopeSelect:o,...a}=t,r=Pe();return e.jsx(cs,{scope:o,id:r,children:e.jsx(W.div,{role:"group","aria-labelledby":r,...a,ref:s})})});ps.displayName=ht;var xt="SelectLabel",gt=n.forwardRef((t,s)=>{const{__scopeSelect:o,...a}=t,r=ds(xt,o);return e.jsx(W.div,{id:r.id,...a,ref:s})});gt.displayName=xt;var fe="SelectItem",[ms,vt]=de(fe),wt=n.forwardRef((t,s)=>{const{__scopeSelect:o,value:a,disabled:r=!1,textValue:d,...i}=t,l=oe(fe,o),c=se(fe,o),p=l.value===a,[_,N]=n.useState(d??""),[f,v]=n.useState(!1),T=q(s,x=>c.itemRefCallback?.(x,a,r)),m=Pe(),h=n.useRef("touch"),j=()=>{r||(l.onValueChange(a),l.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(ms,{scope:o,value:a,disabled:r,textId:m,isSelected:p,onItemTextChange:n.useCallback(x=>{N(y=>y||(x?.textContent??"").trim())},[]),children:e.jsx(xe.ItemSlot,{scope:o,value:a,disabled:r,textValue:_,children:e.jsx(W.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":p&&f,"data-state":p?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...i,ref:T,onFocus:A(i.onFocus,()=>v(!0)),onBlur:A(i.onBlur,()=>v(!1)),onClick:A(i.onClick,()=>{h.current!=="mouse"&&j()}),onPointerUp:A(i.onPointerUp,()=>{h.current==="mouse"&&j()}),onPointerDown:A(i.onPointerDown,x=>{h.current=x.pointerType}),onPointerMove:A(i.onPointerMove,x=>{h.current=x.pointerType,r?c.onItemLeave?.():h.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:A(i.onPointerLeave,x=>{x.currentTarget===document.activeElement&&c.onItemLeave?.()}),onKeyDown:A(i.onKeyDown,x=>{c.searchRef?.current!==""&&x.key===" "||(qo.includes(x.key)&&j(),x.key===" "&&x.preventDefault())})})})})});wt.displayName=fe;var me="SelectItemText",yt=n.forwardRef((t,s)=>{const{__scopeSelect:o,className:a,style:r,...d}=t,i=oe(me,o),l=se(me,o),c=vt(me,o),p=ts(me,o),[_,N]=n.useState(null),f=q(s,j=>N(j),c.onItemTextChange,j=>l.itemTextRefCallback?.(j,c.value,c.disabled)),v=_?.textContent,T=n.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:v},c.value),[c.disabled,c.value,v]),{onNativeOptionAdd:m,onNativeOptionRemove:h}=p;return te(()=>(m(T),()=>h(T)),[m,h,T]),e.jsxs(e.Fragment,{children:[e.jsx(W.span,{id:c.textId,...d,ref:f}),c.isSelected&&i.valueNode&&!i.valueNodeHasChildren?tt.createPortal(d.children,i.valueNode):null]})});yt.displayName=me;var _t="SelectItemIndicator",St=n.forwardRef((t,s)=>{const{__scopeSelect:o,...a}=t;return vt(_t,o).isSelected?e.jsx(W.span,{"aria-hidden":!0,...a,ref:s}):null});St.displayName=_t;var je="SelectScrollUpButton",bt=n.forwardRef((t,s)=>{const o=se(je,t.__scopeSelect),a=ke(je,t.__scopeSelect),[r,d]=n.useState(!1),i=q(s,a.onScrollButtonChange);return te(()=>{if(o.viewport&&o.isPositioned){let l=function(){const p=c.scrollTop>0;d(p)};const c=o.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[o.viewport,o.isPositioned]),r?e.jsx(jt,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=o;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});bt.displayName=je;var Te="SelectScrollDownButton",Nt=n.forwardRef((t,s)=>{const o=se(Te,t.__scopeSelect),a=ke(Te,t.__scopeSelect),[r,d]=n.useState(!1),i=q(s,a.onScrollButtonChange);return te(()=>{if(o.viewport&&o.isPositioned){let l=function(){const p=c.scrollHeight-c.clientHeight,_=Math.ceil(c.scrollTop)<p;d(_)};const c=o.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[o.viewport,o.isPositioned]),r?e.jsx(jt,{...t,ref:i,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=o;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});Nt.displayName=Te;var jt=n.forwardRef((t,s)=>{const{__scopeSelect:o,onAutoScroll:a,...r}=t,d=se("SelectScrollButton",o),i=n.useRef(null),l=ge(o),c=n.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return n.useEffect(()=>()=>c(),[c]),te(()=>{l().find(_=>_.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),e.jsx(W.div,{"aria-hidden":!0,...r,ref:s,style:{flexShrink:0,...r.style},onPointerDown:A(r.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(a,50))}),onPointerMove:A(r.onPointerMove,()=>{d.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(a,50))}),onPointerLeave:A(r.onPointerLeave,()=>{c()})})}),us="SelectSeparator",Tt=n.forwardRef((t,s)=>{const{__scopeSelect:o,...a}=t;return e.jsx(W.div,{"aria-hidden":!0,...a,ref:s})});Tt.displayName=us;var Ce="SelectArrow",fs=n.forwardRef((t,s)=>{const{__scopeSelect:o,...a}=t,r=ve(o),d=oe(Ce,o),i=se(Ce,o);return d.open&&i.position==="popper"?e.jsx(ao,{...r,...a,ref:s}):null});fs.displayName=Ce;var hs="SelectBubbleInput",Ct=n.forwardRef(({__scopeSelect:t,value:s,...o},a)=>{const r=n.useRef(null),d=q(a,r),i=io(s);return n.useEffect(()=>{const l=r.current;if(!l)return;const c=window.HTMLSelectElement.prototype,_=Object.getOwnPropertyDescriptor(c,"value").set;if(i!==s&&_){const N=new Event("change",{bubbles:!0});_.call(l,s),l.dispatchEvent(N)}},[i,s]),e.jsx(W.select,{...o,style:{...Wt,...o.style},ref:d,defaultValue:s})});Ct.displayName=hs;function It(t){return t===""||t===void 0}function Pt(t){const s=Ro(t),o=n.useRef(""),a=n.useRef(0),r=n.useCallback(i=>{const l=o.current+i;s(l),(function c(p){o.current=p,window.clearTimeout(a.current),p!==""&&(a.current=window.setTimeout(()=>c(""),1e3))})(l)},[s]),d=n.useCallback(()=>{o.current="",window.clearTimeout(a.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(a.current),[]),[o,r,d]}function Rt(t,s,o){const r=s.length>1&&Array.from(s).every(p=>p===s[0])?s[0]:s,d=o?t.indexOf(o):-1;let i=xs(t,Math.max(d,0));r.length===1&&(i=i.filter(p=>p!==o));const c=i.find(p=>p.textValue.toLowerCase().startsWith(r.toLowerCase()));return c!==o?c:void 0}function xs(t,s){return t.map((o,a)=>t[(s+a)%t.length])}var gs=st,kt=rt,vs=it,ws=lt,ys=ct,Et=dt,_s=ft,Dt=gt,Mt=wt,Ss=yt,bs=St,Ot=bt,At=Nt,Lt=Tt;const Ns=gs,js=vs,Bt=n.forwardRef(({className:t,children:s,...o},a)=>e.jsxs(kt,{ref:a,className:H("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...o,children:[s,e.jsx(ws,{asChild:!0,children:e.jsx(Re,{className:"h-4 w-4 opacity-50"})})]}));Bt.displayName=kt.displayName;const Vt=n.forwardRef(({className:t,...s},o)=>e.jsx(Ot,{ref:o,className:H("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Fo,{className:"h-4 w-4"})}));Vt.displayName=Ot.displayName;const Ft=n.forwardRef(({className:t,...s},o)=>e.jsx(At,{ref:o,className:H("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Re,{className:"h-4 w-4"})}));Ft.displayName=At.displayName;const Ut=n.forwardRef(({className:t,children:s,position:o="popper",...a},r)=>e.jsx(ys,{children:e.jsxs(Et,{ref:r,className:H("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:o,...a,children:[e.jsx(Vt,{}),e.jsx(_s,{className:H("p-1",o==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Ft,{})]})}));Ut.displayName=Et.displayName;const Ts=n.forwardRef(({className:t,...s},o)=>e.jsx(Dt,{ref:o,className:H("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));Ts.displayName=Dt.displayName;const ue=n.forwardRef(({className:t,children:s,...o},a)=>e.jsxs(Mt,{ref:a,className:H("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...o,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(bs,{children:e.jsx(Po,{className:"h-4 w-4"})})}),e.jsx(Ss,{children:s})]}));ue.displayName=Mt.displayName;const Cs=n.forwardRef(({className:t,...s},o)=>e.jsx(Lt,{ref:o,className:H("-mx-1 my-1 h-px bg-muted",t),...s}));Cs.displayName=Lt.displayName;const Ht=n.forwardRef(({className:t,type:s,...o},a)=>e.jsx("input",{type:s,className:H("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...o}));Ht.displayName="Input";function Se({options:t,selected:s,onChange:o,placeholder:a="Select options...",className:r}){const[d,i]=n.useState(!1),l=n.useRef(null);n.useEffect(()=>{const f=v=>{l.current&&!l.current.contains(v.target)&&i(!1)};return document.addEventListener("mousedown",f),()=>document.removeEventListener("mousedown",f)},[]);const c=f=>{s.includes(f)?o(s.filter(v=>v!==f)):o([...s,f])},p=(f,v)=>{v.stopPropagation(),o(s.filter(T=>T!==f))},_=s.length===0?a:s.length===1?s[0]:`${s.length} selected`,N=f=>{f.key==="Escape"&&s.length>0&&(f.preventDefault(),o([]),i(!1))};return e.jsxs("div",{ref:l,className:H("relative",r),children:[e.jsxs("div",{className:"relative",children:[e.jsxs(ae,{variant:"outline",onClick:()=>i(!d),onKeyDown:N,className:"w-full justify-between h-9 font-normal",children:[e.jsx("span",{className:"truncate",children:_}),e.jsx(Re,{className:H("ml-2 h-4 w-4 shrink-0 transition-transform",d&&"rotate-180")})]}),s.includes("DevOps")&&e.jsx(Q,{className:"absolute -top-2 -right-2 bg-primary hover:bg-primary text-primary-foreground text-xs px-1.5 py-0.5 h-5 min-w-[2rem] rounded-full border-2 border-background pointer-events-none",children:"New"})]}),d&&e.jsx("div",{className:"absolute z-50 mt-1 w-full min-w-[200px] rounded-md border bg-popover text-popover-foreground shadow-md outline-none",children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>o([]),className:H("flex w-full items-center rounded-sm px-2 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground mx-1 w-[calc(100%-8px)]",s.length===0&&"bg-accent/50"),children:[e.jsx("span",{className:"flex-1 text-left",children:a}),s.length===0&&e.jsx("span",{className:"ml-2 text-xs",children:"✓"})]}),e.jsx("div",{className:"my-1 h-px bg-border mx-2"}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto overflow-x-hidden custom-scrollbar",children:t.map(f=>{const v=typeof f=="string"?{value:f}:f,T=s.includes(v.value);return e.jsxs("div",{className:"relative mx-1 w-[calc(100%-8px)]",children:[e.jsxs("button",{onClick:()=>c(v.value),className:H("flex w-full items-center rounded-sm px-2 py-1.5 text-sm hover:bg-accent hover:text-accent-foreground",T&&"bg-accent/50"),children:[e.jsx("span",{className:"flex-1 text-left truncate",children:v.label||v.value}),T&&e.jsx("span",{className:"ml-2 text-xs shrink-0",children:"✓"})]}),v.tag&&v.tagColor==="new"&&e.jsx(Q,{className:"absolute -top-2 -right-2 bg-primary hover:bg-primary text-primary-foreground text-xs px-1.5 py-0.5 h-5 min-w-[2rem] rounded-full border-2 border-background pointer-events-none",children:v.tag})]},v.value)})})]})}),s.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:s.map(f=>{const v=t.find(m=>typeof m=="string"?m===f:m.value===f),T=typeof v=="string"?v:v?.label||v?.value||f;return e.jsxs(Q,{variant:"secondary",className:"text-xs",children:[T,e.jsx("button",{onClick:m=>p(f,m),className:"ml-1 hover:text-destructive",children:e.jsx(ot,{className:"h-3 w-3"})})]},f)})})]})}function Is({searchTerm:t,selectedCategories:s,selectedRoles:o,selectedSessionTypes:a,sortBy:r,onSearchChange:d,onCategoriesChange:i,onRolesChange:l,onSessionTypesChange:c,onSortChange:p,onClearFilters:_}){const N=s.length>0||o.length>0||a.length>0||t.length>0;return e.jsxs("div",{className:"space-y-3 p-3 bg-card rounded-md border",children:[e.jsx("div",{className:"flex items-center justify-end",children:N&&e.jsxs(ae,{variant:"ghost",size:"sm",onClick:_,className:"h-8 px-2 text-muted-foreground hover:text-foreground",children:[e.jsx(ot,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})}),e.jsxs("div",{className:"relative",children:[e.jsx(Ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(Ht,{placeholder:"Search prompts...",value:t,onChange:f=>d(f.target.value),className:"pl-10 h-9"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx(Se,{options:Kt,selected:s,onChange:i,placeholder:"All Categories"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Target Role"}),e.jsx(Se,{options:$t,selected:o,onChange:l,placeholder:"All Roles"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Session Type"}),e.jsx(Se,{options:zt,selected:a,onChange:c,placeholder:"All Session Types"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Sort By"}),e.jsxs(Ns,{value:r,onValueChange:p,children:[e.jsx(Bt,{className:"h-9",children:e.jsx(js,{})}),e.jsxs(Ut,{children:[e.jsx(ue,{value:"popularity",children:"Most Popular"}),e.jsx(ue,{value:"alphabetical",children:"Alphabetical"}),e.jsx(ue,{value:"sessionType",children:"Session Type"}),e.jsx(ue,{value:"recent",children:"Recently Added"})]})]})]})]})]})}const Ps={FolderSearch:qe,FolderOrganize:We,Code:he,BarChart3:He,Settings:Ze,FileText:Qe,Archive:Ye,Shield:Xe,Database:Ue,TestTube:Je,Clock:Ge,RefreshCw:ze,ArrowRightLeft:$e,Activity:Ke,Search:Ie},Rs=t=>{if(!t)return!1;const s=new Date(t),a=Math.abs(new Date().getTime()-s.getTime());return Math.ceil(a/(1e3*60*60*24))<=14};function ks({useCase:t,isOpen:s,onClose:o,onVote:a,isFullPage:r=!1}){const[d,i]=n.useState(!1),[l,c]=n.useState(!1),[p,_]=n.useState(!1),[N,f]=n.useState(!1),{toast:v}=lo(),[T,m]=n.useState(0),h=Gt(),[j,x]=n.useState(!1),[y,F]=n.useState({selectedText:"",selectionLength:0,isFullPrompt:!1,selectionTime:null});n.useEffect(()=>{if(s&&t){window.promptOpenTime=new Date().getTime();const u=parseInt(localStorage.getItem("style_scout_visit_count")||"0"),g=localStorage.getItem("style_scout_viral_session"),w=g?JSON.parse(g):null;h.capture("prompt_modal_opened",{prompt_id:t.id,prompt_title:t.title,prompt_categories:t.categories,prompt_difficulty:t.difficulty,prompt_author:t.author,target_roles:t.targetRoles,visit_count:u,is_returning_user:u>1,is_viral_session:!!w,viral_entry_prompt:w?.prompt_id,time_since_page_load:Math.round((new Date().getTime()-(window.pageLoadTime||new Date().getTime()))/1e3)})}},[s,t,h]);const L=()=>{const u=window.getSelection();if(u&&u.toString().length>0){const g=u.toString(),w=g.length,R=t.prompt.length,V=w>R*.9;x(!0),F({selectedText:g.substring(0,100),selectionLength:w,isFullPrompt:V,selectionTime:new Date().getTime()});const ee=window.promptOpenTime?Math.round((new Date().getTime()-window.promptOpenTime)/1e3):0,Z=parseInt(localStorage.getItem("style_scout_visit_count")||"0"),X=localStorage.getItem("style_scout_viral_session"),ce=X?JSON.parse(X):null;h.capture("prompt_text_selected",{prompt_id:t.id,prompt_title:t.title,selection_length:w,prompt_length:R,selection_percentage:Math.round(w/R*100),is_full_prompt_selected:V,time_before_selection_seconds:ee,visit_count:Z,is_returning_user:Z>1,is_viral_session:!!ce,copy_intent:"text_selection"})}else if(j){const g=window.promptOpenTime?Math.round((new Date().getTime()-window.promptOpenTime)/1e3):0,w=parseInt(localStorage.getItem("style_scout_visit_count")||"0"),R=localStorage.getItem("style_scout_viral_session"),V=R?JSON.parse(R):null;h.capture("prompt_text_deselected",{prompt_id:t.id,prompt_title:t.title,previous_selection_length:y.selectionLength,was_full_prompt_selected:y.isFullPrompt,selection_duration_seconds:y.selectionTime?Math.round((new Date().getTime()-y.selectionTime)/1e3):null,time_before_deselection_seconds:g,visit_count:w,is_returning_user:w>1,is_viral_session:!!V,abandoned_copy_intent:!0}),x(!1)}},$=u=>{const g=window.promptOpenTime?Math.round((new Date().getTime()-window.promptOpenTime)/1e3):0,w=parseInt(localStorage.getItem("style_scout_visit_count")||"0"),R=localStorage.getItem("style_scout_viral_session"),V=R?JSON.parse(R):null;h.capture("prompt_manual_copy_attempt",{prompt_id:t.id,prompt_title:t.title,copy_method:u,had_text_selected:j,selected_length:y.selectionLength,is_full_prompt_selected:y.isFullPrompt,time_from_selection_to_copy:y.selectionTime?Math.round((new Date().getTime()-y.selectionTime)/1e3):null,time_before_copy_seconds:g,bypass_wizard:!0,visit_count:w,is_returning_user:w>1,is_viral_session:!!V,conversion_funnel_step:"manual_copy_bypass"})},b=u=>{(u.ctrlKey||u.metaKey)&&u.key==="c"&&j&&$("keyboard")},P=u=>{if(j){const g=window.promptOpenTime?Math.round((new Date().getTime()-window.promptOpenTime)/1e3):0,w=parseInt(localStorage.getItem("style_scout_visit_count")||"0"),R=localStorage.getItem("style_scout_viral_session"),V=R?JSON.parse(R):null;h.capture("prompt_right_click_detected",{prompt_id:t.id,prompt_title:t.title,had_text_selected:j,selected_length:y.selectionLength,is_full_prompt_selected:y.isFullPrompt,time_before_right_click_seconds:g,visit_count:w,is_returning_user:w>1,is_viral_session:!!V,copy_intent:"context_menu"}),setTimeout(()=>$("context_menu"),100)}};n.useEffect(()=>{if(s){const u=g=>b(g);return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)}},[s,j]),n.useEffect(()=>{if(!t)return;const u=`useCase_uses_${t.id}`,g=localStorage.getItem(u),w=g?Number(g):0;m(Number.isFinite(w)?w:0)},[t?.id]);const C=()=>{if(!t)return;const u=`useCase_uses_${t.id}`;m(g=>{const w=g+1;return localStorage.setItem(u,String(w)),w})};if(!t)return null;const I=Ps[t.icon]||he,D=Rs(t.dateAdded),K=()=>{const u=window.promptOpenTime?Math.round((new Date().getTime()-window.promptOpenTime)/1e3):0,g=parseInt(localStorage.getItem("style_scout_visit_count")||"0"),w=localStorage.getItem("style_scout_viral_session"),R=w?JSON.parse(w):null;h.capture("use_prompt_button_clicked",{prompt_id:t.id,prompt_title:t.title,prompt_categories:t.categories,prompt_difficulty:t.difficulty,prompt_author:t.author,time_before_use_seconds:u,engagement_level:u>30?"high":u>10?"medium":"low",visit_count:g,is_returning_user:g>1,is_viral_session:!!R,viral_entry_prompt:R?.prompt_id,conversion_funnel_step:"prompt_to_wizard"}),_(!0),C()},Y=()=>{if(window.promptOpenTime){const u=Math.round((new Date().getTime()-window.promptOpenTime)/1e3),g=parseInt(localStorage.getItem("style_scout_visit_count")||"0"),w=localStorage.getItem("style_scout_viral_session"),R=w?JSON.parse(w):null;h.capture("prompt_modal_closed",{prompt_id:t.id,prompt_title:t.title,prompt_categories:t.categories,time_in_modal_seconds:u,engagement_level:u>30?"high":u>10?"medium":"low",visit_count:g,is_returning_user:g>1,is_viral_session:!!R,viral_entry_prompt:R?.prompt_id,close_method:"manual"})}o()},z=u=>{switch(u){case"Instant output":return"session-instant-output";case"Step-by-step flow":return"session-step-by-step-flow";default:return"session-instant-output"}},G=(u="share_button")=>{const g=new URL(Ve(`/library/prompts/${t.slug}`),window.location.origin);return g.searchParams.set("utm_source","desktop_commander"),g.searchParams.set("utm_medium",u),g.searchParams.set("utm_campaign","prompt_sharing"),g.searchParams.set("utm_content",t.slug),g.searchParams.set("shared_at",Date.now().toString()),g.toString()},B=async()=>{const u=typeof navigator<"u"&&(/(Mobi|Android|iPhone|iPad|iPod)/i.test(navigator.userAgent)||typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches),g=u&&navigator.share?"native_share":"clipboard_copy",w=G(g),R=`Prompt: ${t.title}`,V=parseInt(localStorage.getItem("style_scout_visit_count")||"0"),ee=localStorage.getItem("style_scout_viral_session"),Z=ee?JSON.parse(ee):null;h.capture("share_button_clicked",{prompt_id:t.id,prompt_title:t.title,prompt_categories:t.categories,prompt_difficulty:t.difficulty,prompt_author:t.author,target_roles:t.targetRoles,device_type:u?"mobile":"desktop",share_url:w,share_method:g,source_page:"prompt_modal",visit_count:V,is_returning_user:V>1,is_viral_session:!!Z,viral_chain_length:Z?1:0,original_viral_prompt:Z?.prompt_id,time_on_prompt_seconds:Math.round((new Date().getTime()-(window.promptOpenTime||new Date().getTime()))/1e3)});try{if(u&&navigator.share){await navigator.share({title:R,text:"Check out this Desktop Commander prompt",url:w}),h.capture("share_native_completed",{prompt_id:t.id,prompt_title:t.title,device_type:"mobile",share_method:"native_share"});return}await navigator.clipboard.writeText(w),f(!0),setTimeout(()=>f(!1),1500),h.capture("share_link_copied",{prompt_id:t.id,prompt_title:t.title,device_type:u?"mobile":"desktop",share_method:"clipboard_copy"}),v({title:"Link copied",description:"Share it with your team.",action:e.jsx(Me,{altText:"Open link",onClick:()=>window.open(w,"_blank","noopener,noreferrer"),children:"Open"})})}catch{try{await navigator.clipboard.writeText(w),f(!0),setTimeout(()=>f(!1),1500),v({title:"Link copied",description:"Share it with your team.",action:e.jsx(Me,{altText:"Open link",onClick:()=>window.open(w,"_blank","noopener,noreferrer"),children:"Open"})})}catch{h.capture("share_failed",{prompt_id:t.id,prompt_title:t.title,device_type:u?"mobile":"desktop",error_type:"clipboard_fallback_failed"}),v({title:"Share failed",description:"Could not share or copy the link.",variant:"destructive"})}}};return e.jsxs(Do,{open:s,onOpenChange:u=>{u||o()},children:[e.jsx(Be,{children:e.jsxs(Mo,{className:"w-[95vw] sm:max-w-2xl lg:max-w-4xl max-h-[90vh] mx-auto flex flex-col",children:[e.jsx(Oo,{className:"flex-shrink-0",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 pr-8 sm:pr-12 min-w-0",children:[e.jsx("div",{className:"p-2 sm:p-3 bg-dc-surface-elevated rounded-lg flex-shrink-0",children:e.jsx(I,{className:"h-5 w-5 sm:h-6 sm:w-6 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(Ao,{className:"text-lg sm:text-2xl leading-tight mb-2 sm:mb-3 break-words flex items-start gap-2",children:[t.title,D&&e.jsxs(Q,{variant:"outline",className:"text-xs bg-primary/10 text-primary border-primary/20 flex-shrink-0",children:[e.jsx(et,{className:"h-3 w-3 mr-1"}),"New"]})]}),e.jsx(Lo,{className:"sr-only",children:"Detailed information and actions for this prompt."}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap min-w-0",children:[t.verified&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs rounded-full border border-primary/20 bg-primary/10 text-primary px-2 py-0.5",children:[e.jsx(co,{className:"h-3 w-3"}),"Verified by DC team"]}),e.jsxs("div",{className:"relative inline-block",children:[e.jsxs(Q,{className:`difficulty-badge ${z(t.sessionType)} text-xs flex items-center gap-1 cursor-pointer hover:opacity-90 transition-opacity`,onClick:()=>c(!l),children:[e.jsx("span",{children:t.sessionType}),e.jsx(De,{className:"h-3 w-3"})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>c(!1)}),e.jsxs("div",{className:"absolute top-full left-0 mt-2 z-50 w-72 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3 animate-in fade-in-0 zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-1 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:Jt[t.sessionType]})}),e.jsx("button",{onClick:u=>{u.stopPropagation(),c(!1)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:"✕"})]}),e.jsx("div",{className:"absolute -top-2 left-4 w-4 h-4 bg-white dark:bg-gray-800 border-l border-t border-gray-200 dark:border-gray-700 rotate-45"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.categories.map((u,g)=>e.jsx(Q,{variant:"outline",className:"text-xs",children:u},g))}),e.jsxs("div",{className:"flex items-center gap-1 text-xs sm:text-sm text-muted-foreground",children:[e.jsx(po,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"truncate",children:t.author})]})]})]}),e.jsxs("div",{className:"shrink-0 hidden sm:flex items-center gap-2","aria-label":"All-time engagement",children:[e.jsx(Le,{count:t.votes+(d?1:0)}),e.jsxs(mo,{children:[e.jsx(uo,{asChild:!0,children:e.jsx("button",{type:"button","aria-label":`Exact uses: ${t.votes} (all-time)`,className:"inline-flex items-center justify-center text-muted-foreground hover:text-foreground",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(fo,{align:"end",side:"bottom",children:["Exact uses: ",t.votes," (all-time)"]})]})]})]})}),e.jsxs("div",{className:"space-y-4 sm:space-y-6 overflow-y-auto min-h-0 flex-1 pr-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-1.5 sm:mb-2",children:"Description"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground leading-relaxed break-words",children:t.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold mb-2 sm:mb-3",children:"Target Roles"}),e.jsx("div",{className:"flex flex-wrap gap-1.5 sm:gap-2 min-w-0",children:t.targetRoles.map(u=>e.jsx(Q,{variant:"secondary",className:"role-tag text-xs",children:u},u))})]}),e.jsx(ho,{}),e.jsxs("div",{children:[e.jsx("div",{className:"mb-3 sm:mb-4",children:e.jsx("h3",{className:"text-base sm:text-lg font-semibold",children:"Complete Prompt"})}),e.jsx("div",{className:"p-3 sm:p-4 bg-dc-surface-elevated rounded-lg border min-w-0",onMouseUp:L,onKeyUp:L,onContextMenu:P,children:e.jsx("pre",{className:"text-xs sm:text-sm text-foreground whitespace-pre-wrap font-mono leading-relaxed select-text break-words overflow-wrap-anywhere min-w-0",children:t.prompt})})]})]}),e.jsx("div",{className:"flex-shrink-0 border-t pt-4 mt-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3 min-w-0",children:[e.jsx(ae,{variant:"outline",onClick:Y,className:"order-3 sm:order-1 min-w-0",children:e.jsx("span",{className:"truncate",children:"Close"})}),e.jsxs(Yt,{children:[e.jsx(Zt,{asChild:!0,children:e.jsxs(ae,{variant:"outline",onClick:B,"aria-label":"Share this prompt",className:"flex items-center gap-2 order-2 min-w-0",children:[e.jsx(xo,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:N?"Copied":"Share"})]})}),e.jsx(qt,{children:"Copy link to share"})]}),e.jsxs(ae,{className:"dc-button-primary flex items-center gap-2 order-1 sm:order-3 min-w-0",onClick:K,children:[e.jsx(Bo,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Use Prompt"})]})]})})]})}),e.jsx(go,{isOpen:p,onClose:()=>_(!1),prompt:t.prompt,promptTitle:t.title})]})}function pn({initialPromptId:t}){const s=n.useMemo(()=>{if(typeof window>"u")return[];const P=new URLSearchParams(window.location.search).get("role");return P?[P]:[]},[]),[o,a]=n.useState(Ee),[r,d]=n.useState(""),[i,l]=n.useState([]),[c,p]=n.useState(s),[_,N]=n.useState([]),[f,v]=n.useState("popularity"),T=["8","59","2","84","53","82","78","4","43"],m=n.useMemo(()=>t&&Ee.find(b=>b.id===t)||null,[t]),[h,j]=n.useState(m),[x,y]=n.useState(!!m);n.useEffect(()=>{t&&m&&!x&&(j(m),y(!0))},[t,m,x]);const F=n.useMemo(()=>{let b=o;if(r){const C=r.toLowerCase();b=b.filter(I=>I.title.toLowerCase().includes(C)||I.description.toLowerCase().includes(C)||I.prompt.toLowerCase().includes(C)||I.categories.some(D=>D.toLowerCase().includes(C))||I.targetRoles.some(D=>D.toLowerCase().includes(C)))}i.length>0&&(b=b.filter(C=>i.some(I=>C.categories.includes(I)))),c.length>0&&(b=b.filter(C=>c.some(I=>C.targetRoles.includes(I)))),_.length>0&&(b=b.filter(C=>_.includes(C.sessionType)));const P=[...b];switch(f){case"popularity":P.sort((C,I)=>(I.gaClicks||0)-(C.gaClicks||0));break;case"newest":P.sort((C,I)=>{const D=new Date(C.dateAdded||"1970-01-01").getTime();return new Date(I.dateAdded||"1970-01-01").getTime()-D});break;case"alphabetical":P.sort((C,I)=>C.title.localeCompare(I.title));break}if(!r&&i.length===0&&c.length===0&&_.length===0){const C=P.filter(D=>T.includes(D.id)),I=P.filter(D=>!T.includes(D.id));return[...C,...I]}return P},[o,r,i,c,_,f]),L=b=>{const P=b.slug||b.id;window.location.href=Ve(`/library/prompts/${P}`)},$=b=>{console.log("Vote for prompt:",b)};return e.jsxs(Be,{children:[e.jsxs("div",{className:"container mx-auto px-4 py-8 mt-20",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Prompt Library"}),e.jsxs("p",{className:"text-muted-foreground",children:["Discover ",o.length,"+ curated prompts for Desktop Commander"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Eo,{}),e.jsx(ae,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:"https://github.com/wonderwhy-er/DesktopCommanderMCP",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:["Documentation",e.jsx(Vo,{className:"h-4 w-4"})]})})]})]}),e.jsx(Is,{searchTerm:r,onSearchChange:d,selectedCategories:i,onCategoriesChange:l,selectedRoles:c,onRolesChange:p,selectedSessionTypes:_,onSessionTypesChange:N,sortBy:f,onSortChange:v,totalResults:F.length})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:F.map(b=>e.jsx(Wo,{useCase:b,onOpen:L,onVote:$},b.id))}),F.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground text-lg",children:"No prompts found matching your filters."}),e.jsx(ae,{variant:"outline",className:"mt-4",onClick:()=>{d(""),l([]),p([]),N([])},children:"Clear Filters"})]})]}),e.jsx(ks,{useCase:h,isOpen:x,onClose:()=>y(!1),onVote:$})]})}export{pn as default};
