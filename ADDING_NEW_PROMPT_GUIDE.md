# Guide: Adding a New Prompt to the Library

## Overview
The Desktop Commander prompt library stores all prompts in a JSON file that's imported by the React application. Adding a new prompt is straightforward - you just need to add a new object to the JSON file with the correct structure.

## File Locations

### Main Data File
- **Path**: `/src/data/library/useCases.json`
- **Purpose**: Contains all prompts in a single JSON array
- **Structure**: Single object with `useCases` array containing all prompt objects

### Type Definitions
- **Path**: `/src/data/library/useCases.ts`
- **Purpose**: TypeScript interfaces and data processing
- **Auto-updates**: No manual changes needed when adding prompts (unless changing structure)

## Prompt Object Structure

Each prompt in the `useCases` array must have these fields:

```json
{
  "id": "string",           // Unique numeric string (e.g., "1", "2", "100")
  "title": "string",        // Display title (used for SEO slug generation)
  "description": "string",  // Short description shown on card
  "prompt": "string",       // Full prompt text (can be very long, supports markdown)
  "sessionType": "string",  // Either "Instant output" or "Step-by-step flow"
  "targetRoles": ["array"], // e.g., ["Developers", "Data analysts"]
  "categories": ["array"],  // e.g., ["Build features and products"]
  "votes": number,          // Integer (can start at 0)
  "gaClicks": number,       // Google Analytics clicks (can start at 0)
  "icon": "string",         // Lucide icon name (e.g., "Settings", "TestTube")
  "author": "string",       // Author name or "DC team"
  "verified": boolean,      // true for DC team prompts, false for community
  "dateAdded": "string",    // Optional: ISO date string "YYYY-MM-DD"
  "difficulty": "string",   // Optional: difficulty level
  "taskCategory": "string"  // Optional: for DevOps categorization
}
```

## Field Details

### Required Fields

**id** (string)
- Must be unique across all prompts
- Use next available number as string
- Example: If last prompt is "99", use "100"

**title** (string)
- Clear, descriptive title
- Used to generate SEO-friendly URL slug automatically
- Example: "Build A Feature from Scratch"

**description** (string)
- Brief summary (1-2 sentences)
- Shown on prompt card in library
- Example: "Build a new feature for your app based on your existing codebase."

**prompt** (string)
- The actual prompt content
- Can be very long (thousands of characters)
- Supports markdown formatting
- Include clear instructions and examples
- Can use multi-line strings in JSON (use \n for line breaks)

**sessionType** (string)
- Must be one of:
  - `"Instant output"` - Single prompt, immediate result
  - `"Step-by-step flow"` - Multi-step interactive workflow

**targetRoles** (array of strings)
- Who this prompt is for
- Available roles: "Developers", "Data analysts", "Professionals", "DevOps", "Vibe Coders", "Students"
- Can include multiple roles
- Example: `["Developers", "Vibe Coders"]`

**categories** (array of strings)
- What the prompt does
- Existing categories include:
  - "Build features and products"
  - "Analyze data"
  - "Deploy"
  - "Design systems"
  - "Optimize workflow"
  - And more...
- Can create new categories by adding them
- Can include multiple categories
- Example: `["Build features and products"]`

**votes** (number)
- User votes/likes
- Start with 0 for new prompts
- Example: `0`

**gaClicks** (number)
- Google Analytics click tracking
- Used for popularity sorting
- Start with 0 for new prompts
- Example: `0`

**icon** (string)
- Lucide React icon name
- Check available icons at https://lucide.dev
- Common examples: "Settings", "TestTube", "Code", "Database", "FileText"
- Example: `"Settings"`

**author** (string)
- Creator name
- Use "DC team" for official prompts
- Use actual name for community prompts
- Example: `"DC team"` or `"serg33v"`

**verified** (boolean)
- `true` for DC team prompts
- `false` for community-submitted prompts
- Adds verification badge
- Example: `true`

### Optional Fields

**dateAdded** (string)
- ISO date format: "YYYY-MM-DD"
- Used for "newest" sorting
- Example: `"2025-01-15"`

**difficulty** (string)
- Skill level required
- Example: `"Beginner"`, `"Intermediate"`, `"Advanced"`

**taskCategory** (string)
- Used for DevOps filtering
- Options: "Environment Setup", "Database Management", "Server Configuration", "Deploy Applications", "Monitor Systems"

**slug** (string)
- Auto-generated from title, no need to add manually
- URL-friendly version of title
- Generated by the system

## Step-by-Step: Adding Your Prompt

### Step 1: Get the Next Available ID

1. Open `src/data/library/useCases.json`
2. Look at the last prompt in the array
3. Note its `id` value
4. Your new prompt ID = that number + 1 (as a string)

### Step 2: Find the Right Position
1. Open `src/data/library/useCases.json`
2. Scroll to the bottom of the `useCases` array
3. The array ends with `]` after the last prompt object

### Step 3: Create Your Prompt Object

Create a new JSON object with all required fields:

```json
{
  "id": "101",
  "title": "Your Prompt Title",
  "description": "Brief description of what this prompt does.",
  "prompt": "Full prompt text here. Can be very long.\n\nSupports multiple paragraphs.\n\n## Can use markdown\n\n- Bullet points\n- Lists\n- Everything!",
  "sessionType": "Instant output",
  "targetRoles": ["Developers"],
  "categories": ["Build features and products"],
  "votes": 0,
  "gaClicks": 0,
  "icon": "Code",
  "author": "Your Name",
  "verified": false,
  "dateAdded": "2025-10-16"
}
```

### Step 4: Add to JSON File

1. Open `src/data/library/useCases.json`
2. Find the last prompt object (before the closing `]`)
3. Add a comma after the last prompt's closing `}`
4. Paste your new prompt object
5. Ensure proper JSON formatting (commas, brackets, quotes)
6. Save the file

**Example:**
```json
{
  "useCases": [
    {
      "id": "1",
      "title": "Existing Prompt",
      ...
    },
    {
      "id": "2", 
      "title": "Another Prompt",
      ...
    },    // <- Don't forget this comma!
    {
      "id": "3",
      "title": "Your New Prompt",
      ...
    }    // <- Last item has no comma
  ]
}
```

### Step 5: Verify JSON Formatting

**Critical**: JSON must be perfectly formatted!

Common mistakes:
- ❌ Missing comma between objects
- ❌ Extra comma after last object
- ❌ Unescaped quotes in strings (use `\"` inside strings)
- ❌ Missing closing braces or brackets
- ✅ Use a JSON validator to check: https://jsonlint.com

### Step 6: Test Locally

1. Save the file
2. The dev server should auto-reload (if running)
3. Visit http://localhost:4321/library
4. Look for your new prompt in the library
5. Click on it to verify all fields display correctly

### Step 7: Verify Everything Works

Check that:
- ✅ Prompt appears in the library grid
- ✅ Title and description are correct
- ✅ Icon displays properly
- ✅ Clicking opens the modal with full prompt text
- ✅ Categories and roles are shown correctly
- ✅ Filtering works (try filtering by your categories/roles)
- ✅ Search finds your prompt

## Example: Complete New Prompt

Here's a complete example of adding a new prompt:

```json
{
  "id": "101",
  "title": "Debug Production Issues",
  "description": "Systematically identify and resolve production bugs using logs and error tracking.",
  "prompt": "# Production Issue Debugging Assistant\n\n## Your Mission\nHelp identify and resolve production issues efficiently using systematic debugging methodology.\n\n## Getting Started\n\nTo help you effectively, I need:\n\n1. **What's the issue?** Describe the problem or error\n2. **When did it start?** Timeline of the issue\n3. **Project path:** Full path to your project\n4. **Log locations:** Where are error logs stored?\n\n## Debugging Process\n\n### Phase 1: Investigation\n1. Review error logs and stack traces\n2. Identify error patterns and frequency\n3. Gather relevant context and environment info\n\n### Phase 2: Analysis\n1. Reproduce the issue if possible\n2. Narrow down root cause\n3. Identify affected components\n\n### Phase 3: Resolution\n1. Develop fix strategy\n2. Test the solution\n3. Deploy and verify\n\nReady to help you debug! Share the issue details to get started.",
  "sessionType": "Step-by-step flow",
  "targetRoles": ["Developers", "DevOps"],
  "categories": ["Debug and optimize"],
  "votes": 0,
  "gaClicks": 0,
  "icon": "Bug",
  "author": "DC team",
  "verified": true,
  "dateAdded": "2025-10-16"
}
```

## Tips for Great Prompts

### Writing the Prompt Text
1. **Be clear and specific** - Users should know exactly what to expect
2. **Include examples** - Show how to use the prompt
3. **Structure well** - Use markdown headers, lists, and sections
4. **Provide context** - Explain what the prompt does and why
5. **Add instructions** - Tell users what information they need to provide

### Choosing Categories
- Pick categories that users would naturally search for
- Use existing categories when possible
- Create new categories only if necessary
- Multiple categories are fine if the prompt covers multiple use cases

### Selecting Target Roles
- Think about who would actually use this prompt
- Be specific but not too narrow
- Include all relevant roles

### Icon Selection
- Choose icons that visually represent the prompt's function
- Browse Lucide icons: https://lucide.dev
- Popular choices: Code, Database, FileText, Settings, Bug, Wrench, Search

## Common Issues & Solutions

### Issue: JSON Parse Error
**Cause**: Invalid JSON formatting
**Solution**: 
- Use a JSON validator: https://jsonlint.com
- Check for missing/extra commas
- Ensure all strings use double quotes
- Escape special characters in strings

### Issue: Prompt Not Appearing
**Cause**: ID conflict or malformed data
**Solution**:
- Verify ID is unique
- Check all required fields are present
- Refresh browser and clear cache

### Issue: Icon Not Showing
**Cause**: Invalid icon name
**Solution**:
- Check icon name spelling
- Verify icon exists in Lucide: https://lucide.dev
- Icon names are case-sensitive

### Issue: Markdown Not Rendering
**Cause**: Incorrect escaping in JSON
**Solution**:
- Use `\n` for newlines in JSON strings
- Escape backslashes: `\\`
- Escape quotes: `\"`

## Featured Prompts

To make your prompt featured (shown first), add its ID to the `featuredPromptIds` array in:
- File: `src/components/library/PromptsLibraryAstro.tsx`
- Line: Search for `featuredPromptIds`
- Add your prompt ID to the array

Example:
```typescript
const featuredPromptIds = ['8', '59', '2', '55', '53', '82', '78', '4', '43', '101'];
```

## Need Help?

If you run into issues:
1. Check the JSON formatting carefully
2. Compare your prompt to existing prompts in the file
3. Verify all required fields are present
4. Test in a JSON validator
5. Check the browser console for errors

## Summary Checklist

Before committing your new prompt:

- [ ] Unique ID assigned
- [ ] All required fields present
- [ ] JSON properly formatted (validated)
- [ ] Icon name is valid
- [ ] Categories exist or are intentionally new
- [ ] Target roles are appropriate
- [ ] Prompt text is clear and helpful
- [ ] Tested locally and displays correctly
- [ ] Description is concise and accurate
- [ ] Session type matches the prompt flow

---

**You're ready to add your new prompt!** Follow the steps above and your prompt will be available in the library. 🚀
