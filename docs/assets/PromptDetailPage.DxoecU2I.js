import{j as e}from"./jsx-runtime.D3GSbgeI.js";import{u as U,a as B,A as F,b as L,T as M,c as R,P as z,d as A,B as I,s as $,U as O,E as C,e as W,f as H,g as V,S as q,h as G,i as J,j as K,k as Q,l as X,m as g,n as Y}from"./UsePromptWizard.DDRojY4H.js";import{B as m}from"./button.nz_ACiet.js";import{B as l}from"./badge.B5JefYrn.js";import{r as o}from"./index.BaMLtrTp.js";import{S as Z}from"./search.CTWaWu2N.js";import{R as ee}from"./refresh-cw.3-55pmhE.js";import{C as te}from"./clock.YdwQlIOd.js";import{D as re}from"./database.BD9zb1Qc.js";import{S as se}from"./shield.Dnfnq1p4.js";import{F as ae}from"./file-text.DlCSEU1L.js";import{S as oe}from"./settings.DFIRZYHL.js";import{C as ie}from"./chart-column.BMc3CsP9.js";import{C as j}from"./code.BOyVoLRs.js";import{F as ne}from"./folder-open.xHIhBzFI.js";import{F as le}from"./folder-search.DcGsVAUM.js";import{S as ce}from"./sparkles.sp_Qnyce.js";import{I as u}from"./info.BKH_R1lK.js";import{R as de}from"./rocket.DJM_PiJ5.js";import"./index.yBjzXJbu.js";import"./createLucideIcon.CJ67VFfW.js";import"./index.43vDj7kz.js";import"./index.BbTPjBLC.js";import"./utils.XhT4HDO9.js";import"./index._qG7Evzt.js";import"./index.TBW-Ygoe.js";import"./index.CyN3cLSG.js";import"./x.B1hOxjOp.js";import"./dialog.vV1Kkutr.js";import"./index.DO9Pln2g.js";import"./module.C-PkBFPJ.js";import"./external-link.BigcEWhC.js";import"./message-square.bamY-dpJ.js";import"./terminal.CvJQ-WtW.js";import"./check.eE7yIrYi.js";const me={FolderSearch:le,FolderOrganize:ne,Code:j,BarChart3:ie,Settings:oe,FileText:ae,Archive:R,Shield:se,Database:re,TestTube:M,Clock:te,RefreshCw:ee,ArrowRightLeft:L,Activity:F,Search:Z},pe=t=>{if(!t)return!1;const c=new Date(t),i=Math.abs(new Date().getTime()-c.getTime());return Math.ceil(i/(1e3*60*60*24))<=14},Ke=({useCase:t})=>{const[c,b]=o.useState(!1),[i,n]=o.useState(!1),[w,p]=o.useState(!1),[y,x]=o.useState(!1),{toast:h}=U(),[xe,f]=o.useState(0),d=B();o.useEffect(()=>{if(!t)return;const r=`useCase_uses_${t.id}`,s=localStorage.getItem(r),a=s?Number(s):0;f(Number.isFinite(a)?a:0),d.capture("prompt_page_viewed",{prompt_id:t.id,prompt_title:t.title,prompt_slug:t.slug,prompt_categories:t.categories,prompt_session_type:t.sessionType,source_page:"direct_url",url_type:"seo_friendly"})},[t?.id,d]);const v=()=>{if(!t)return;const r=`useCase_uses_${t.id}`;f(s=>{const a=s+1;return localStorage.setItem(r,String(a)),a})};if(!t)return null;const N=me[t.icon]||j,k=pe(t.dateAdded),S=()=>{p(!0),v()},_=()=>{window.location.href=g("/library/prompts")},T=r=>{switch(r){case"Instant output":return"session-instant-output";case"Step-by-step flow":return"session-step-by-step-flow";default:return"session-instant-output"}},P=(r="share_button")=>{const s=new URL(g(`/library/prompts/${t.slug}`),window.location.origin);return s.searchParams.set("utm_source","desktop_commander"),s.searchParams.set("utm_medium",r),s.searchParams.set("utm_campaign","prompt_sharing"),s.searchParams.set("utm_content",t.slug||""),s.searchParams.set("shared_at",Date.now().toString()),s.toString()},D=async()=>{const r=typeof navigator<"u"&&(/(Mobi|Android|iPhone|iPad|iPod)/i.test(navigator.userAgent)||typeof window<"u"&&window.matchMedia&&window.matchMedia("(pointer: coarse)").matches),s=r&&navigator.share?"native_share":"clipboard_copy",a=P(s),E=`Prompt: ${t.title}`;d.capture("share_button_clicked",{prompt_id:t.id,prompt_title:t.title,share_method:s,source_page:"prompt_detail_page"});try{if(r&&navigator.share){await navigator.share({title:E,text:"Check out this Desktop Commander prompt",url:a});return}await navigator.clipboard.writeText(a),x(!0),setTimeout(()=>x(!1),1500),h({title:"Link copied",description:"Share it with your team.",action:e.jsx(Y,{altText:"Open link",onClick:()=>window.open(a,"_blank","noopener,noreferrer"),children:"Open"})})}catch{h({title:"Share failed",description:"Could not share or copy the link.",variant:"destructive"})}};return e.jsx(z,{children:e.jsxs(A,{children:[e.jsx("div",{className:"min-h-screen bg-background mt-20",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs(m,{variant:"ghost",onClick:_,className:"mb-6 -ml-2 text-muted-foreground hover:text-foreground",children:[e.jsx("svg",{className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Library"]}),e.jsxs("div",{className:"flex items-start gap-4 mb-8",children:[e.jsx("div",{className:"p-3 bg-dc-surface-elevated rounded-lg flex-shrink-0",children:e.jsx(N,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-3 break-words flex items-start gap-2",children:[t.title,k&&e.jsxs(l,{variant:"outline",className:"text-xs bg-primary/10 text-primary border-primary/20 flex-shrink-0",children:[e.jsx(ce,{className:"h-3 w-3 mr-1"}),"New"]})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[t.verified&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs rounded-full border border-primary/20 bg-primary/10 text-primary px-2 py-0.5",children:[e.jsx(I,{className:"h-3 w-3"}),"Verified by DC team"]}),e.jsxs("div",{className:"relative inline-block",children:[e.jsxs(l,{className:`difficulty-badge ${T(t.sessionType)} text-xs flex items-center gap-1 cursor-pointer hover:opacity-90 transition-opacity`,onClick:()=>n(!i),children:[e.jsx("span",{children:t.sessionType}),e.jsx(u,{className:"h-3 w-3"})]}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>n(!1)}),e.jsxs("div",{className:"absolute top-full left-0 mt-2 z-50 w-72 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg p-3 animate-in fade-in-0 zoom-in-95 duration-200",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-1 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:$[t.sessionType]})}),e.jsx("button",{onClick:r=>{r.stopPropagation(),n(!1)},className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 transition-colors",children:"âœ•"})]}),e.jsx("div",{className:"absolute -top-2 left-4 w-4 h-4 bg-white dark:bg-gray-800 border-l border-t border-gray-200 dark:border-gray-700 rotate-45"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.categories.map((r,s)=>e.jsx(l,{variant:"outline",className:"text-xs",children:r},s))}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:t.author})]})]})]}),e.jsxs("div",{className:"shrink-0 flex items-center gap-2",children:[e.jsx(C,{count:t.votes+(c?1:0)}),e.jsxs(W,{children:[e.jsx(H,{asChild:!0,children:e.jsx("button",{type:"button","aria-label":`Exact uses: ${t.votes} (all-time)`,className:"inline-flex items-center justify-center text-muted-foreground hover:text-foreground",children:e.jsx(u,{className:"h-4 w-4"})})}),e.jsxs(V,{align:"end",side:"bottom",children:["Exact uses: ",t.votes," (all-time)"]})]})]})]}),e.jsxs("div",{className:"space-y-8 mb-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-base text-muted-foreground leading-relaxed break-words",children:t.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Target Roles"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.targetRoles.map(r=>e.jsx(l,{variant:"secondary",className:"role-tag text-xs",children:r},r))})]}),e.jsx(q,{}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Complete Prompt"}),e.jsx("div",{className:"p-6 bg-dc-surface-elevated rounded-lg border max-h-96 overflow-y-auto",children:e.jsx("pre",{className:"text-sm text-foreground whitespace-pre-wrap font-mono leading-relaxed",children:t.prompt})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[e.jsxs(G,{children:[e.jsx(J,{asChild:!0,children:e.jsxs(m,{variant:"outline",onClick:D,"aria-label":"Share this prompt",className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{children:y?"Copied":"Share"})]})}),e.jsx(Q,{children:"Copy link to share"})]}),e.jsxs(m,{className:"dc-button-primary flex items-center gap-2",onClick:S,children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{children:"Use Prompt"})]})]})]})}),e.jsx(X,{isOpen:w,onClose:()=>p(!1),prompt:t.prompt,promptTitle:t.title})]})})};export{Ke as default};
